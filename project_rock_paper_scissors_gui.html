<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Rock Paper Scissors Game</title>
  </head>
  <body style="overflow-y: scroll;">
    <div class="container" style="max-width: 700px; margin-left: auto; margin-right: auto;">
      <div class="title">
        <p>Rock Paper Scissors game: Choose your weapon!</p>
      </div>
      <div>
        <div  style="text-align: center; margin-bottom: 10px; border: 5px solid gray;"><p>1 - 1</p></div>
      </div>
      <div style="display: flex;">
        <div style="display: flex; flex-direction: column; gap: 6px; ">
          <div>
            <button id="btnRock">Rock</button>
            <button id="btnPaper">Paper</button>
            <button id="btnScissors">Scissors</button>
          </div>
          <div><button id="btnClear">Clear</button></div>
        </div>
        <div>
          <ul id="output" style="margin: 0px;">  </ul>

        </div>
      </div>
    </div>
    <script>
      
      let humanScore = 0;
      let computerScore = 0;

      let humanChoice = '';
      let rounds = 1;

      function getComputerChoice(){
        const choiceValues = ['rock', 'paper', 'scissors'];
        const rnd = Math.ceil(Math.random()*3)-1;
        return choiceValues[rnd];
      }

      function getHumanChoice() {
        const choiceValues = ['rock', 'paper', 'scissors'];
        return choiceValues[humanChoice];
      }

      function playRound(humanChoice,compChoice){
        const choiceValues = ['rock', 'paper', 'scissors'];
        const nrHumanChoice =  choiceValues.indexOf(humanChoice);
        const nrCompChoice =  choiceValues.indexOf(compChoice);
        if(nrHumanChoice === nrCompChoice){
          return 'Stalemate, but computer wins anyways, because I AM BATMAN!';
        }else if(nrHumanChoice === 0 && nrCompChoice === 1) {
          return 'Computer wins! Hooman loses!';
        }else if(nrHumanChoice === 1 && nrCompChoice === 0){
          return 'Hooman wins! Computer loses!';
        }else if(nrHumanChoice === 2 && nrCompChoice === 0) {
          return 'Computer wins! Hooman loses!';
        }else if(nrHumanChoice === 0 && nrCompChoice === 2){
          return 'Hooman wins! Computer loses!';
        }else if(nrHumanChoice === 1 && nrCompChoice === 2) {
          return 'Computer wins! Hooman loses!';
        }else if(nrHumanChoice === 2 && nrCompChoice === 1){
          return 'Hooman wins! Computer loses!';
        }
      }

      function playGame(ulTagParent) {
        const ulTag = document.createElement("ul");
        // rounds
        const brTag = document.createElement("li");
        brTag.textContent = `Round ${rounds++}`;
        //ulTag.appendChild(brTag);

        const humanChoice = getHumanChoice();
        // li
        const liTagHum = document.createElement("li");
        liTagHum.textContent = `Human chose ${humanChoice}!`;
        const compChoice = getComputerChoice();
        // li
        const liTagCom = document.createElement("li");
        liTagCom.textContent = `Computer chose ${compChoice}!`;
        const result = playRound(humanChoice,compChoice);
        // depeding on the result change the background color: green, red, grey
        const colorWin = "#26e058";
        const colorLose = "#de5f6e";
        const colorTie = "#f2f5f3";
        let colorResult = result.startsWith('Hooman wins') ? colorWin : result.startsWith("Stalemate") ? colorTie : colorLose
        ulTag.setAttribute("style", `background: ${colorResult}; margin: 2px; padding: 4px; border-radius: 10px;`);
        // li
        const liTagRes = document.createElement("li");
        liTagRes.textContent = result;
        // append Elements
        ulTag.insertBefore(liTagRes,ulTag.firstElementChild);
        ulTag.insertBefore(liTagCom,ulTag.firstElementChild);
        ulTag.insertBefore(liTagHum,ulTag.firstElementChild);
        ulTag.insertBefore(brTag,ulTag.firstElementChild);
        ulTagParent.insertBefore(ulTag, ulTagParent.firstElementChild);
      }


      const ulTag = document.querySelector("#output");
      const btnRock = document.querySelector("#btnRock")
      btnRock.addEventListener("click", () => {
          humanChoice = 0;
          playGame(ulTag);
        });
      const btnPaper = document.querySelector("#btnPaper")
      btnPaper.addEventListener("click", () => {
          humanChoice = 1;
          playGame(ulTag);
        });
      const btnScissors = document.querySelector("#btnScissors")
      btnScissors.addEventListener("click", () => {
          humanChoice = 2;
          playGame(ulTag);
        });
      const btnClear = document.querySelector("#btnClear")
      btnClear.addEventListener("click", () => {    
            rounds=1;
            while (ulTag.firstChild) {
              ulTag.removeChild(ulTag.firstChild);
          }
        });
      

    </script>
  </body>
</html>
